# =============================================================================
# DaMai-Go 秒杀系统配置文件
# =============================================================================
# 环境变量覆盖规则: SECKILL_<SECTION>_<KEY>
# 示例: SECKILL_SERVER_PORT=9090 会覆盖 server.port
# =============================================================================

# -----------------------------------------------------------------------------
# 服务器配置
# -----------------------------------------------------------------------------
server:
  name: seckill-service        # 服务名称（用于服务注册）
  port: 8080                   # HTTP 监听端口
  mode: debug                  # 运行模式: debug(开发) / release(生产) / test(测试)
  read_timeout: 10s            # 读取请求超时时间
  write_timeout: 10s           # 写入响应超时时间

# -----------------------------------------------------------------------------
# MySQL 数据库配置
# -----------------------------------------------------------------------------
mysql:
  host: 127.0.0.1              # 数据库主机地址
  port: 3307                   # 数据库端口（K8s 端口转发用 3307）
  user: root                   # 用户名
  password: root123456         # 密码
  database: seckill            # 数据库名
  charset: utf8mb4             # 字符集
  max_idle_conns: 10           # 最大空闲连接数
  max_open_conns: 100          # 最大打开连接数
  conn_max_lifetime: 6h        # 连接最大存活时间
  log_level: info              # SQL日志级别: silent/error/warn/info

# -----------------------------------------------------------------------------
# Redis 配置
# -----------------------------------------------------------------------------
redis:
  addr: 127.0.0.1:6379         # Redis 地址
  password: ""                 # 密码（无密码留空）
  db: 0                        # 数据库索引
  pool_size: 100               # 连接池大小
  min_idle_conns: 10           # 最小空闲连接数
  dial_timeout: 5s             # 连接超时
  read_timeout: 3s             # 读超时
  write_timeout: 3s            # 写超时

# -----------------------------------------------------------------------------
# RabbitMQ 配置
# -----------------------------------------------------------------------------
rabbitmq:
  url: amqp://guest:guest@localhost:6672/  # AMQP 连接地址
  queue_name: seckill_queue                # 秒杀队列名称

# -----------------------------------------------------------------------------
# Kafka 配置（预留，后续迁移使用）
# -----------------------------------------------------------------------------
kafka:
  brokers:                     # Broker 地址列表
    - localhost:9092
  topic: seckill_orders        # 订单主题
  group_id: seckill_consumer   # 消费者组 ID

# -----------------------------------------------------------------------------
# JWT 配置
# -----------------------------------------------------------------------------
jwt:
  secret: your-256-bit-secret-key-change-in-production  # JWT 签名密钥
  issuer: seckill              # Token 签发者
  expire_time: 72h             # Token 过期时间

# -----------------------------------------------------------------------------
# 日志配置
# -----------------------------------------------------------------------------
log:
  level: info                  # 日志级别: debug/info/warn/error
  format: json                 # 输出格式: json/console
  output_path: stdout          # 输出路径: stdout 或文件路径如 ./logs/app.log
  max_size: 100                # 单文件最大大小(MB)，用于日志轮转
  max_backups: 3               # 保留的旧日志文件数量
  max_age: 7                   # 日志保留天数
  compress: true               # 是否压缩旧日志

# -----------------------------------------------------------------------------
# Consul 配置（预留，服务注册发现）
# -----------------------------------------------------------------------------
consul:
  addr: 127.0.0.1:8500         # Consul 地址
  service_name: seckill        # 注册的服务名称
  service_port: 8080           # 服务端口
  health_check: /health        # 健康检查路径
